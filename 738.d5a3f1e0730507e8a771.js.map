{"version":3,"sources":["webpack://react-router-ultimate-burgers/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://react-router-ultimate-burgers/./src/Products/ProductEdit.js","webpack://react-router-ultimate-burgers/./src/Products/ProductsService.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ProductEditStyles","css","isEdit","id","useParams","navigate","useNavigate","useState","form","setForm","useEffect","retrieveProduct","product","console","warn","replace","name","price","description","updateField","handleCreate","createProduct","handleUpdate","updateProduct","alert","handleDelete","window","confirm","deleteProduct","className","type","placeholder","onChange","target","parseInt","onClick","listProducts","fetch","response","ok","json","Error","payload","method","headers","body","JSON","stringify"],"mappings":"4IAAe,SAASA,EAAgBC,EAAKC,EAAKC,GAYhD,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,E,gvBCDT,IAAMQ,GAAoBC,QAAH,0uBA8KvB,QAzIoB,SAAC,GAAe,IAAbC,EAAa,EAAbA,OACbC,GAAOC,UAAPD,GACFE,GAAWC,UACjB,GAAwBC,cAAS,MAAjC,eAAOC,EAAP,KAAaC,EAAb,MAEAC,gBAAU,WACHR,GAUL,iBAAC,8GAEyBS,QAAgBR,GAFzC,OAESS,EAFT,OAGGH,EAAQG,GAHX,gDAKGC,QAAQC,KAAR,MACAT,EAAS,SAAU,CAAEU,SAAS,IANjC,wDAAD,GATEN,EAAQ,CACNN,GAAI,GACJa,KAAM,GACNC,MAAO,EACPC,YAAa,OAchB,CAACf,IAEJ,IAAMgB,EAAc,SAAC,GAAoB,IAAlBH,EAAkB,EAAlBA,KAAMtB,EAAY,EAAZA,MAC3Be,EAAQ,EAAD,KACFD,GADE,cAEJQ,EAAOtB,MAIN0B,EAAY,mCAAG,gHAEIC,QAAcb,GAFlB,gBAETL,EAFS,EAETA,GACRE,EAAS,UAAD,OAAWF,IAHF,gDAKjBU,QAAQC,KAAR,MALiB,yDAAH,qDASZQ,EAAY,mCAAG,wGAEXC,QAAcf,GAFH,OAGjBgB,MAAM,WAAD,OAAYhB,EAAKQ,OACtBX,EAAS,UAJQ,gDAMjBQ,QAAQC,KAAR,MANiB,yDAAH,qDAUZW,EAAY,mCAAG,iFACdC,OAAOC,QAAP,wBAAgCnB,EAAKQ,KAArC,MADc,2EAKXY,QAAcpB,EAAKL,IALR,OAMjBE,EAAS,UANQ,gDAQjBQ,QAAQC,KAAR,MARiB,yDAAH,qDAYlB,OAAa,OAATN,EACK,yCAIP,wBAAMqB,UAAW7B,GACf,yBACE8B,KAAK,OACLd,KAAK,KACLe,YAAY,KACZF,UAAU,oBACVnC,MAAOc,EAAKL,GACZ6B,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgBd,EAAYc,MAExC,yBACEH,KAAK,OACLd,KAAK,OACLe,YAAY,OACZF,UAAU,oBACVnC,MAAOc,EAAKQ,KACZgB,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgBd,EAAYc,MAExC,yBACEH,KAAK,OACLd,KAAK,QACLe,YAAY,QACZF,UAAU,oBACVnC,MAAOc,EAAKS,MACZe,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OACRd,EAAY,CAAEH,KAAMiB,EAAOjB,KAAMtB,MAAOwC,SAASD,EAAOvC,MAAO,SAGnE,4BACEsB,KAAK,cACLe,YAAY,cACZF,UAAU,yCACVnC,MAAOc,EAAKU,YACZc,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgBd,EAAYc,OAEtC/B,GACA,0BACE4B,KAAK,SACLD,UAAU,qBACVM,QAASf,GAHX,UASDlB,GACC,0BACE4B,KAAK,SACLD,UAAU,qBACVM,QAASb,GAHX,UASDpB,GACC,0BACE4B,KAAK,SACLD,UAAU,qBACVM,QAASV,GAHX,a,gHC7KKW,EAAY,mCAAG,oGACHC,MAAM,iBADH,YACpBC,EADoB,QAEbC,GAFa,gCAGXD,EAASE,OAHE,qDAKpB,IAAIC,MAAM,wBALU,2CAAH,qDAQZpB,EAAa,mCAAG,WAAOqB,GAAP,uFACJL,MAAM,gBAAiB,CAC5CM,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUL,KANI,YACrBJ,EADqB,QASdC,GATc,gCAUZD,EAASE,OAVG,qDAYrB,IAAIC,MAAM,wBAZW,2CAAH,sDAeb9B,EAAe,mCAAG,WAAOR,GAAP,uFACNkC,MAAM,iBAAD,OAAkBlC,IADjB,YACvBmC,EADuB,QAEhBC,GAFgB,gCAGdD,EAASE,OAHK,qDAKvB,IAAIC,MAAM,wBALa,2CAAH,sDAQflB,EAAa,mCAAG,WAAOmB,GAAP,uFACJL,MAAM,iBAAD,OAAkBK,EAAQvC,IAAM,CAC1DwC,OAAQ,MACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUL,KANI,YACrBJ,EADqB,QASdC,GATc,gCAUZD,EAASE,OAVG,qDAYrB,IAAIC,MAAM,wBAZW,2CAAH,sDAebb,EAAa,mCAAG,WAAOzB,GAAP,4EACrBmC,EAAWD,MAAM,iBAAD,OAAkBlC,GAAM,CAC5CwC,OAAQ,YAGGJ,GALc,gCAMZD,EAASE,OANG,qDAQrB,IAAIC,MAAM,wBARW,2CAAH","file":"738.d5a3f1e0730507e8a771.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { css } from \"@emotion/css\";\r\n\r\nimport {\r\n  createProduct,\r\n  retrieveProduct,\r\n  updateProduct,\r\n  deleteProduct,\r\n} from \"./ProductsService\";\r\n\r\nconst ProductEditStyles = css`\r\n  color: #fff;\r\n  background: #2a2c37;\r\n  border-radius: 6px;\r\n  padding: 15px;\r\n  .ProductEdit {\r\n    &-Input {\r\n      width: 100%;\r\n      border: 1px solid transparent;\r\n      color: #fff;\r\n      background: #1d1e26;\r\n      padding: 10px 15px;\r\n      margin-bottom: 5px;\r\n      border-radius: 6px;\r\n      outline: 0;\r\n      &:focus {\r\n        border-color: #50fa7b;\r\n      }\r\n    }\r\n    &-Textarea {\r\n      min-height: 80px;\r\n      resize: none;\r\n    }\r\n    &-Button {\r\n      border: 2px solid #50fa7b;\r\n      color: #50fa7b;\r\n      background: none;\r\n      padding: 10px 15px;\r\n      border-radius: 6px;\r\n      outline: 0;\r\n      cursor: pointer;\r\n      font-weight: 600;\r\n      text-transform: uppercase;\r\n    }\r\n  }\r\n`;\r\n\r\nconst ProductEdit = ({ isEdit }) => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [form, setForm] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!isEdit) {\r\n      setForm({\r\n        id: \"\",\r\n        name: \"\",\r\n        price: 0,\r\n        description: \"\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    (async () => {\r\n      try {\r\n        const product = await retrieveProduct(id);\r\n        setForm(product);\r\n      } catch (e) {\r\n        console.warn(e);\r\n        navigate(`/admin`, { replace: true });\r\n      }\r\n    })();\r\n  }, [id]);\r\n\r\n  const updateField = ({ name, value }) => {\r\n    setForm({\r\n      ...form,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    try {\r\n      const { id } = await createProduct(form);\r\n      navigate(`/admin/${id}`);\r\n    } catch (e) {\r\n      console.warn(e);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = async () => {\r\n    try {\r\n      await updateProduct(form);\r\n      alert(`Updated ${form.name}`);\r\n      navigate(`/admin`);\r\n    } catch (e) {\r\n      console.warn(e);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!window.confirm(`Really delete ${form.name}?`)) {\r\n      return;\r\n    }\r\n    try {\r\n      await deleteProduct(form.id);\r\n      navigate(`/admin`);\r\n    } catch (e) {\r\n      console.warn(e);\r\n    }\r\n  };\r\n\r\n  if (form === null) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <form className={ProductEditStyles}>\r\n      <input\r\n        type=\"text\"\r\n        name=\"id\"\r\n        placeholder=\"ID\"\r\n        className=\"ProductEdit-Input\"\r\n        value={form.id}\r\n        onChange={({ target }) => updateField(target)}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        name=\"name\"\r\n        placeholder=\"Name\"\r\n        className=\"ProductEdit-Input\"\r\n        value={form.name}\r\n        onChange={({ target }) => updateField(target)}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        name=\"price\"\r\n        placeholder=\"Price\"\r\n        className=\"ProductEdit-Input\"\r\n        value={form.price}\r\n        onChange={({ target }) =>\r\n          updateField({ name: target.name, value: parseInt(target.value, 10) })\r\n        }\r\n      />\r\n      <textarea\r\n        name=\"description\"\r\n        placeholder=\"Description\"\r\n        className=\"ProductEdit-Input ProductEdit-Textarea\"\r\n        value={form.description}\r\n        onChange={({ target }) => updateField(target)}\r\n      />\r\n      {!isEdit && (\r\n        <button\r\n          type=\"button\"\r\n          className=\"ProductEdit-Button\"\r\n          onClick={handleCreate}\r\n        >\r\n          Create\r\n        </button>\r\n      )}\r\n\r\n      {isEdit && (\r\n        <button\r\n          type=\"button\"\r\n          className=\"ProductEdit-Button\"\r\n          onClick={handleUpdate}\r\n        >\r\n          Update\r\n        </button>\r\n      )}\r\n\r\n      {isEdit && (\r\n        <button\r\n          type=\"button\"\r\n          className=\"ProductEdit-Button\"\r\n          onClick={handleDelete}\r\n        >\r\n          Delete\r\n        </button>\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ProductEdit;\r\n","export const listProducts = async () => {\r\n  const response = await fetch(`/api/products`);\r\n  if (response.ok) {\r\n    return await response.json();\r\n  }\r\n  throw new Error(\"Something went wrong\");\r\n};\r\n\r\nexport const createProduct = async (payload) => {\r\n  const response = await fetch(`/api/products`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  if (response.ok) {\r\n    return await response.json();\r\n  }\r\n  throw new Error(\"Something went wrong\");\r\n};\r\n\r\nexport const retrieveProduct = async (id) => {\r\n  const response = await fetch(`/api/products/${id}`);\r\n  if (response.ok) {\r\n    return await response.json();\r\n  }\r\n  throw new Error(\"Something went wrong\");\r\n};\r\n\r\nexport const updateProduct = async (payload) => {\r\n  const response = await fetch(`/api/products/${payload.id}`, {\r\n    method: \"PUT\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  if (response.ok) {\r\n    return await response.json();\r\n  }\r\n  throw new Error(\"Something went wrong\");\r\n};\r\n\r\nexport const deleteProduct = async (id) => {\r\n  const response = fetch(`/api/products/${id}`, {\r\n    method: \"DELETE\",\r\n  });\r\n\r\n  if (response.ok) {\r\n    return await response.json();\r\n  }\r\n  throw new Error(\"Something went wrong\");\r\n};\r\n"],"sourceRoot":""}